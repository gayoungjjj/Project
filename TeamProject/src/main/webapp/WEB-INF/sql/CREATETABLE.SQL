CREATE TABLE COMPANY (
  COMPANAME     VARCHAR2(20)  PRIMARY KEY,
  CEO           VARCHAR2(15)  NOT NULL,
  PHONE_NUMBER  VARCHAR2(15)  NOT NULL,
  ADDRESS       VARCHAR2(300) NOT NULL,
  CREATE_DATE   NUMBER(4),
  BUSINESS_TYPE VARCHAR2(20)
);

CREATE TABLE COMPANY_USERS(

  USER_ID      VARCHAR2(20) PRIMARY KEY,
  USERNAME     VARCHAR2(10) ,
  COMPNAME     VARCHAR2(30) NOT NULL,
  EMAIL        VARCHAR2(100) UNIQUE ,
  PASSWORD     VARCHAR2(20) NOT NULL,
  PHONE_NUMBER VARCHAR2(15),
  J_DATE       DATE         DEFAULT SYSDATE

);

CREATE TABLE JOBPOSTING (
  APLNUM      NUMBER(20)    PRIMARY KEY ,
  POST_ID        VARCHAR2(50)  NOT NULL,
  USER_ID     VARCHAR2(20),
  COMPNAME    VARCHAR2(30),
  RECRUITNUM  NUMBER(30),
  DEADLINE    DATE          DEFAULT SYSDATE,
  DUTY        VARCHAR2(100),
  CAREER      VARCHAR2(100),
  EDU         VARCHAR2(100),
  SKILLS      VARCHAR2(100),
  LICENSES    VARCHAR2(100),
  WORKSPACE   VARCHAR2(20),
  SALARY      NUMBER(20),
  DEPARTMENT  VARCHAR2(30)
);


CREATE TABLE APPLICATIONS (
    APP_ID       NUMBER         PRIMARY KEY,     
    USER_ID      VARCHAR2(20)   NOT NULL,         
    POST_ID      NUMBER         NOT NULL,         
    RESUME_ID    NUMBER         NOT NULL,         
    APP_DATE     DATE           DEFAULT  SYSDATE, 
    PICTURE      VARCHAR2(300),                  
    LOCATION     VARCHAR2(100),                    
	RESULT       VARCHAR2(20)   			 
); 

CREATE TABLE RESUMES (
    RESUME_ID NUMBER         PRIMARY KEY,    
    USER_ID   VARCHAR2(20)   NOT NULL,        
    TITLE     VARCHAR2(100),                  
    CAREER    VARCHAR2(100),                 
    EDU       VARCHAR2(100),                 
    SKILLS    VARCHAR2(100),                 
    LICENSES  VARCHAR2(100),                 
    PORTFOLIO VARCHAR2(100),                  
   SELFINTRO  VARCHAR2(1500),                
    C_DATE    DATE           DEFAULT SYSDATE, 
    U_DATE    DATE           DEFAULT SYSDATE  
);



CREATE TABLE USERS (
    USER_ID      VARCHAR2(20)   PRIMARY KEY,      
    USERNAME     VARCHAR2(50)   NOT NULL,        
    EMAIL        VARCHAR2(100)  NOT NULL UNIQUE,  
    PASSWORD     VARCHAR2(300)  NOT NULL,
    PHONE_NUMBER VARCHAR2(20),                   
    ADDRESS      VARCHAR2(300),                   
    J_DATE       DATE           DEFAULT SYSDATE    
);



ALTER TABLE COMPANY_USERS
ADD CONSTRAINT FK_COMPNAME FOREIGN KEY (COMPNAME) REFERENCES COMPANY;


ALTER TABLE JOBPOSTING
ADD CONSTRAINT FK_USER_ID FOREIGN KEY (USER_ID) 
REFERENCES COMPANY_USERS;

ALTER TABLE JOBPOSTING
ADD CONSTRAINT FK_COMPNAME1 FOREIGN KEY (COMPNAME) 
REFERENCES COMPANY;


ALTER TABLE APPLICATIONS
ADD CONSTRAINT FK_USER_ID1 FOREIGN KEY (USER_ID) 
REFERENCES USERS;

ALTER TABLE APPLICATIONS
ADD CONSTRAINT FK_POST_ID FOREIGN KEY (POST_ID) 
REFERENCES JOBPOSTING;

ALTER TABLE APPLICATIONS
ADD CONSTRAINT FK_RESUME_ID FOREIGN KEY (RESUME_ID) 
REFERENCES RESUMES;


ALTER TABLE RESUMES
ADD CONSTRAINT FK_USER_ID2 FOREIGN KEY (USER_ID) 
REFERENCES USERS;

COMMIT;


//ALTER TABLE RESUMES
//ADD CONSTRAINT FK_CAREER FOREIGN KEY (CAREER) 
//REFERENCES JOBPOSTING;


// INSERT 예시 3개

INSERT INTO users ( USER_ID,  USERNAME,  EMAIL,  PASSWORD,  PHONE_NUMBER,  ADDRESS) 
VALUES ('sky','하늘이','sky@gmail.com', '1234', '010-1234-5678', '부산시 해운대구');
INSERT INTO users ( USER_ID,  USERNAME,  EMAIL,  PASSWORD,  PHONE_NUMBER,  ADDRESS) 
VALUES ('sky2','하늘이2','sky2@gmail.com', '1234', '010-1334-5678', '부산시 동구');
INSERT INTO users ( USER_ID,  USERNAME,  EMAIL,  PASSWORD,  PHONE_NUMBER,  ADDRESS) 
VALUES ('sky3','하늘이3','sky3@gmail.com', '1234', '010-1434-5678', '부산시 남구');



commit;


SELECT
    USER_ID,
    USERNAME,
    EMAIL,
    PASSWORD,
    PHONE_NUMBER,
    ADDRESS,
    J_DATE
FROM
    USERS;
    
    
  
    
 
 INSERT INTO COMPANY ( COMPANAME, CEO,  PHONE_NUMBER,  ADDRESS) 
 VALUES ( '하늘상사1','하늘1', '010-1934-5678', '부산시 해운대구');
  INSERT INTO COMPANY ( COMPANAME, CEO,  PHONE_NUMBER,  ADDRESS) 
 VALUES ( '하늘상사2','하늘2', '010-8234-5678', '부산시 동구');
  INSERT INTO COMPANY ( COMPANAME, CEO,  PHONE_NUMBER,  ADDRESS) 
 VALUES ( '하늘상사3','하늘3', '010-1734-5678', '부산시 남구');
 

INSERT INTO COMPANY_USERS ( USER_ID, USERNAME, COMPNAME, EMAIL, PASSWORD, PHONE_NUMBER)
 VALUES ('sky1','하늘이1','하늘상사1','sky@gmail.com', '1234', '010-1934-5678');
 
INSERT INTO COMPANY_USERS ( USER_ID, USERNAME, COMPNAME, EMAIL, PASSWORD, PHONE_NUMBER)
VALUES ('sky12','김하늘','하늘상사2','sky2@gmail.com', '1234', '010-8234-5678');
 
 INSERT INTO COMPANY_USERS ( USER_ID, USERNAME, COMPNAME, EMAIL, PASSWORD, PHONE_NUMBER)
 VALUES ('sky123','하늘이3','하늘상사3','sky3@gmail.com', '1234', '010-1734-5678');
 

 
 

 commit;
 
 SELECT
    USER_ID,
    USERNAME,
    COMPNAME,
    EMAIL,
    PASSWORD,
    PHONE_NUMBER,
    J_DATE
FROM
    COMPANY_USERS;



